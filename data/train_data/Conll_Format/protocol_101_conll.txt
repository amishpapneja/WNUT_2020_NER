Building	O
an	O
HPC	O
blast	O
pipeline	O

Login	B-Action
to	O
the	O
hpc	B-Location
at	O
the	O
University	O
of	O
Arizona	O
with	O
your	O
user	B-Reagent
name	I-Reagent
Create	I-Reagent
a	B-Action
directory	I-Action
for	B-Reagent
the	O
pipeline	O
Go	O
to	B-Action
the	O
hpc	O
blast	B-Location
directory	I-Location
and	I-Location
create	B-Action
sub	I-Action
directories	B-Reagent
to	I-Reagent
hold	I-Reagent
std	O
err	O
,	O
std	O
out	O
,	O
data	O
,	O
blastdb	O
,	O
blast	O
results	O
and	O
scripts	O
.	O

Go	B-Action
to	O
the	O
blastdb	B-Location
directory	I-Location
and	O
create	B-Action
the	O
blast	B-Reagent
database	I-Reagent
.	O

Copy	B-Action
the	O
input	B-Reagent
files	I-Reagent
over	O
from	O
iPlant	B-Location
.	O

We	O
will	O
be	O
using	O
the	O
day	O
night	O
transcriptomes	O
we	O
discussed	O
last	O
week	O
.	O

You	O
will	O
use	O
two	O
of	O
the	O
Perl	O
scripts	O
from	O
the	O
homework	O
in	O
the	O
hpc	O
pipeline	O
.	O

Put	B-Action
these	B-Mention
into	O
the	O
scripts	B-Location
directory	I-Location
.	O

config	O
.	O
sh	O
Now	O
we	O
need	O
to	O
create	B-Action
the	I-Action
config	B-Reagent
.	I-Reagent
sh	I-Reagent
script	I-Reagent
.	I-Reagent

This	O
script	O
will	O
contain	O
all	O
of	O
the	O
environmental	O
variables	O
that	O
the	O
user	O
will	O
be	O
able	O
to	O
modify	O
for	O
running	O
blast	O
.	O

The	O
idea	O
of	O
this	O
script	O
is	O
to	O
give	O
the	O
user	O
one	O
place	O
to	O
make	O
any	O
changes	O
they	O
need	O
to	O
run	O
their	O
particular	O
blast	O
job	O
.	O

The	O
user	O
should	O
not	O
have	O
to	O
go	O
in	O
and	O
change	O
any	O
of	O
the	O
scripts	O
in	O
the	O
'scripts'	O
directory	O
.	O

Instead	O
,	O
we	O
will	O
capture	O
all	O
of	O
these	O
variable	O
here	O
.	O

note	O
the	O
the	O
config	O
.	O
sh	O
script	O
is	O
in	O
the	O
hpc	O
blast	O
directory	O
in	O
the	O
first	O
part	O
of	O
the	O
pipeline	O
,	O
where	O
it	O
is	O
easy	O
for	O
the	O
user	O
to	O
modify	O
it	O
.	O

blast	O
pipeline	O
.	O
sh	O
Now	O
we	O
will	O
create	B-Action
the	I-Action
driver	B-Reagent
script	I-Reagent
,	I-Reagent
the	I-Reagent
script	I-Reagent
that	O
is	O
used	O
to	O
run	O
each	O
part	O
of	O
the	O
pipeline	O
.	O

run	O
fasta	O
splitter	O
.	O
sh	O
.	O

Create	B-Action
a	O
shell	B-Reagent
script	I-Reagent
that	O
runs	O
the	O
fasta	B-Reagent
splitter	I-Reagent
perl	I-Reagent
code	I-Reagent
.	O

run	O
blast	O
.	O
sh	O
Create	B-Action
a	I-Action
shell	I-Action
script	B-Reagent
that	I-Reagent
runs	O
blast	O
on	O
a	O
compute	B-Location
node	I-Location
.	I-Location

run	O
parse	O
blast	O
.	O
sh	O
Create	B-Action
a	I-Action
shell	I-Action
script	B-Reagent
to	I-Reagent
parse	I-Reagent
the	O
blast	O
output	O
that	O
runs	O
on	O
a	O
compute	B-Location
node	I-Location
on	I-Location
the	I-Location
cluster	O
.	O

04	O
blast	O
search	O
.	O
pl	O
modify	B-Action
the	I-Action
blast	B-Reagent
search	I-Reagent
script	I-Reagent
.	I-Reagent
Update	I-Reagent
the	B-Action
e	O
value	B-Measure-Type
to	I-Measure-Type
be	I-Measure-Type
less	O
stringent	B-Generic-Measure
.	I-Generic-Measure
Modify	I-Generic-Measure
the	O
Perl	O
script	O
04	O
blast	O
search	O
.	O
pl	O
to	O
include	O
additional	O
information	O
about	O
the	O
hit	O
.	O

Make	B-Action
all	O
of	O
the	O
scripts	B-Reagent
executable	B-Modifier
and	O
then	O
run	B-Action
the	O
pipeline	B-Reagent
.	O
If	O
you	O
don't	O
get	O
any	O
errors	O
,	O
the	O
pipeline	O
will	O
take	O
1	B-Time
day	I-Time
to	I-Time
run	O
.	O

Check	O
to	O
see	O
if	O
the	O
pipeline	O
is	O
running	O
Once	O
the	O
pipeline	O
is	O
finished	O
running	O
and	O
you	O
don't	O
see	O
the	O
jobs	O
listed	O
under	O
qstat	O
,	O
check	O
for	O
std	O
errors	O
and	O
std	O
out	O
.	O
Note	O
you	O
can	O
check	O
while	O
the	O
pipeline	O
is	O
running	O
too	O
.	O

Now	O
you	O
try	O
.	O
See	O
if	O
you	O
can	O
update	O
the	O
pipeline	O
to	O
add	B-Action
one	O
final	O
step	B-Reagent
that	O
puts	B-Action
all	O
of	O
the	O
parsed	B-Reagent
blast	I-Reagent
output	I-Reagent
into	O
a	O
single	B-Location
file	I-Location
for	O
each	O
of	O
the	O
original	O
fasta	O
files	O
.	O
Note	O
that	O
you	O
can	O
comment	O
out	O
the	O
parts	O
of	O
the	O
blast	O
pipeline	O
.	O
sh	O
that	O
you	O
have	O
already	O
run	O
in	O
the	O
steps	O
above	O
,	O
to	O
test	O
your	O
code	O
.	O

Otherwise	O
,	O
these	O
will	O
run	O
again	O
.	O
Also	O
,	O
before	O
you	O
run	O
this	O
final	O
step	O
,	O
make	O
sure	O
the	O
blast	O
parsing	O
is	O
complete	O
.	O
Can	O
this	O
run	O
on	O
the	O
head	O
node	O
,	O
or	O
should	O
we	O
run	O
this	O
on	O
a	O
compute	O
node	O
?	O
The	O
complete	O
pipeline	O
can	O
be	O
found	O
in	O
github	O
here	O
.	O

Commit	B-Action
your	O
code	B-Reagent
to	O
your	O
own	O
github	B-Location
abe487	I-Location
repository	I-Location
using	O
the	O
directory	B-Reagent
hpc	I-Reagent
blast	I-Reagent



